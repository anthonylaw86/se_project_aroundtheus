!function(){"use strict";var e=class{constructor(e,t,s){this._name=e.name,this._link=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLikeIcon())),this._element.querySelector(".card__trash-button").addEventListener("click",(()=>this._handleDeleteCard())),this._element.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick({name:this._name,link:this._link})))}_handleDeleteCard(){this._element.remove(),this._element=null}_handleLikeIcon(){this._likeButton.classList.toggle("card__like-button_active")}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}getView(){return this._element=this._getTemplate(),this._likeButton=this._element.querySelector(".card__like-button"),this._setEventListeners(),this._element.querySelector(".card__image").src=this._link,this._element.querySelector(".card__image").alt=this._name,this._element.querySelector(".card__title").textContent=this._name,this._element}};class t{initialCards=[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}];settings={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visable"};validationSettings={inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"}}new t;var s=class{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent=" ",t.classList.remove(this._errorClass)}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}toggleButtonState(){this._hasInvalidInput()?this._disableButton():this._enableButton()}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}_setEventListeners(){this._inputEls=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}};class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal")||e.target.classList.contains("modal__close"))&&this.close()}))}}var i=class extends n{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=s,this._inputList=this._popupElement.querySelectorAll(".modal__input")}_getInputValues(){const e={};return this._inputList.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault();const t=this._getInputValues();this._handleFormSubmit(t),console.log(t)}))}reset(){this._popupForm.reset()}};const o=document.querySelector("#profile-edit-modal"),r=document.querySelector("#add-card-modal"),l=(document.querySelector(".profile__title"),document.querySelector(".profile__description"),r.querySelector(".modal__form")),a=document.querySelector(".profile__add-button"),c=document.querySelector("#profile-edit-button"),u=document.querySelector("#profile-title-input"),_=document.querySelector("#profile-description-input"),d=(l.querySelector(".modal__input_type_title"),l.querySelector(".modal__input_type_url"),new t),m=o.querySelector(".modal__form"),p=new s(d.settings,m),h=new s(d.settings,l);function S(t){return new e(t,"#card-template",E).getView()}p.enableValidation(),h.enableValidation();const v=new class{constructor(e,t){let{items:s,renderer:n}=e;this._renderer=n,this._container=document.querySelector(t),this._items=s}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:d.initialCards,renderer:e=>{const t=S(e);v.addItem(t)}},".cards__list");function E(e){g.open(e)}const g=new class extends n{open(e){let{name:t,link:s}=e;this._popupElement.querySelector(".modal__image-title").textContent=t;const n=this._popupElement.querySelector(".modal__image");n.src=s,n.alt=t,super.open()}}({popupSelector:"#preview-image-modal"});g.setEventListeners();const y=new i({popupSelector:"#add-card-modal",handleFormSubmit:e=>{!function(e){let{name:t,link:s}=e;const n=S({name:t,link:s});v.addItem(n),y.close(),y.reset()}(e)}});y.setEventListeners();const f=new i({popupSelector:"#profile-edit-modal",handleFormSubmit:e=>{!function(e){let{title:t,description:s}=e;b.setUserInfo({title:t,description:s}),f.close()}(e)}});f.setEventListeners();const b=new class{constructor(e){let{profileTitleSelector:t,profileDescriptionSelector:s}=e;this._title=document.querySelector(t),this._description=document.querySelector(s)}getUserInfo(){return{title:this._title.textContent,description:this._description.textContent}}setUserInfo(e){let{title:t,description:s}=e;this._title.textContent=t,this._description.textContent=s}}({profileTitleSelector:".profile__title",profileDescriptionSelector:".profile__description"});c.addEventListener("click",(()=>{const e=b.getUserInfo();u.value=e.title,_.value=e.description,f.open()})),v.renderItems(),a.addEventListener("click",(()=>{h.toggleButtonState(),y.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RyxXQUFBQSxDQUFXUCxHQUF5QixJQUF4QixNQUFFSSxFQUFLLFlBQUVDLEdBQWFMLEVBQ2hDMUgsS0FBS3FJLE9BQU83RyxZQUFjc0csRUFDMUI5SCxLQUFLc0ksYUFBYTlHLFlBQWN1RyxDQUNsQyxHSDRFNEIsQ0FDNUJJLHFCQUFzQixrQkFDdEJDLDJCQUE0QiwwQkFtQjlCckMsRUFBa0J0RixpQkFBaUIsU0FBUyxLQUMxQyxNQUFNK0gsRUFBV1IsRUFBU08sY0FDMUJ2QyxFQUFrQlYsTUFBUWtELEVBQVNWLE1BQ25DN0IsRUFBd0JYLE1BQVFrRCxFQUFTVCxZQUN6Q0YsRUFBaUJ0RCxNQUFNLElBR3pCbUMsRUFBVU8sY0FFVm5CLEVBQWlCckYsaUJBQWlCLFNBQVMsS0FDekM2RixFQUFpQjlDLG9CQUNqQmdFLEVBQWFqRCxNQUFNLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XG5cbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlTGlrZUljb24oKSk7XG5cbiAgICB0aGlzLl9lbGVtZW50XG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIilcbiAgICAgIC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpKTtcblxuICAgIHRoaXMuX2VsZW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pXG4gICAgICApO1xuICB9XG5cbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlSWNvbigpIHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XG4gIH1cblxuICBnZXRWaWV3KCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1idXR0b25cIik7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZVwiKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29uc3RhbnRzIHtcbiAgaW5pdGlhbENhcmRzID0gW1xuICAgIHtcbiAgICAgIG5hbWU6IFwiWW9zZW1pdGUgVmFsbGV5XCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QveW9zZW1pdGUuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvYmFsZC1tb3VudGFpbnMuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiBcIkxhdGVtYXJcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhZ28uanBnXCIsXG4gICAgfSxcbiAgXTtcblxuICBzZXR0aW5ncyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXG4gICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcbiAgICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNhYmxlXCIsXG4gIH07XG5cbiAgdmFsaWRhdGlvblNldHRpbmdzID0ge1xuICAgIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dFwiLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uX2Rpc2FibGVkXCIsXG4gICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxuICB9O1xufVxuIiwiaW1wb3J0IENvbnN0YW50cyBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cbmNvbnN0IGNvbnN0YW50cyA9IG5ldyBDb25zdGFudHMoKTtcblxuY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7XG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xuXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWwpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7XG4gICAgZXJyb3JNZXNzYWdlRWwudGV4dENvbnRlbnQgPSBcIiBcIjtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICB9XG5cbiAgX2Rpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgfVxuXG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgIHRoaXMuX2Rpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dCgpIHtcbiAgICByZXR1cm4gIXRoaXMuX2lucHV0RWxzLmV2ZXJ5KChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVscyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG5cbiAgICB0aGlzLl9pbnB1dEVscy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoZSkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCk7XG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShlKSB7XG4gICAgaWYgKGUua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZSkgPT4ge1xuICAgICAgaWYgKFxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSB8fFxuICAgICAgICBlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9fY2xvc2VcIilcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9wb3B1cEZvcm0gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0VmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICBjb25zdCB2YWx1ZXMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh2YWx1ZXMpO1xuICAgICAgY29uc29sZS5sb2codmFsdWVzKTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlc2V0KCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XG4iLCJpbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQ29uc3RhbnRzIGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcblxuLypFTEVNRU5UUyovXG5cbmNvbnN0IGVkaXRQcm9maWxlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XG5jb25zdCBwcm9maWxlVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3RpdGxlXCIpO1xuY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiKTtcbmNvbnN0IGFkZENhcmRGb3JtRWxlbWVudCA9IGFkZENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuXG4vKkJVVFRPTlMqL1xuXG5jb25zdCBhZGROZXdDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtZWRpdC1idXR0b25cIik7XG5cbi8qRk9STSBEQVRBKi9cblxuY29uc3QgcHJvZmlsZVRpdGxlSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtdGl0bGUtaW5wdXRcIik7XG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb25JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxuKTtcbmNvbnN0IGNhcmRUaXRsZUlucHV0ID0gYWRkQ2FyZEZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbnB1dF90eXBlX3RpdGxlXCJcbik7XG5jb25zdCBjYXJkVVJMSW5wdXQgPSBhZGRDYXJkRm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW5wdXRfdHlwZV91cmxcIik7XG5jb25zdCBjb25zdGFudHMgPSBuZXcgQ29uc3RhbnRzKCk7XG5cbmNvbnN0IGVkaXRGb3JtRWxlbWVudCA9IGVkaXRQcm9maWxlTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcblxuY29uc3QgZWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihcbiAgY29uc3RhbnRzLnNldHRpbmdzLFxuICBlZGl0Rm9ybUVsZW1lbnRcbik7XG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoXG4gIGNvbnN0YW50cy5zZXR0aW5ncyxcbiAgYWRkQ2FyZEZvcm1FbGVtZW50XG4pO1xuXG5lZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLypGVU5DVElPTlMqL1xuXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xufVxuXG5jb25zdCBjYXJkc1dyYXAgPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBjb25zdGFudHMuaW5pdGlhbENhcmRzLFxuICAgIHJlbmRlcmVyOiAoY2FyZERhdGEpID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSByZW5kZXJDYXJkKGNhcmREYXRhKTtcbiAgICAgIGNhcmRzV3JhcC5hZGRJdGVtKGNhcmQpO1xuICAgIH0sXG4gIH0sXG4gIFwiLmNhcmRzX19saXN0XCJcbik7XG5cbmZ1bmN0aW9uIGhhbmRsZUltYWdlQ2xpY2soZGF0YSkge1xuICBwcmV2aWV3UG9wdXAub3BlbihkYXRhKTtcbn1cblxuY29uc3QgcHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjcHJldmlldy1pbWFnZS1tb2RhbFwiLFxufSk7XG5wcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBcIiNhZGQtY2FyZC1tb2RhbFwiLFxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xuICAgIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGRhdGEpO1xuICB9LFxufSk7XG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcHJvZmlsZUVkaXRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3RvcjogXCIjcHJvZmlsZS1lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoZGF0YSk7XG4gIH0sXG59KTtcbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBwcm9maWxlVGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3I6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG59KTtcblxuLypFVkVOVCBIQU5ETEVSUyovXG5cbmZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KHsgdGl0bGUsIGRlc2NyaXB0aW9uIH0pIHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oeyB0aXRsZSwgZGVzY3JpcHRpb24gfSk7XG4gIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQoeyBuYW1lLCBsaW5rIH0pIHtcbiAgY29uc3QgbmV3Q2FyZCA9IHJlbmRlckNhcmQoeyBuYW1lLCBsaW5rIH0pO1xuICBjYXJkc1dyYXAuYWRkSXRlbShuZXdDYXJkKTtcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XG4gIG5ld0NhcmRQb3B1cC5yZXNldCgpO1xufVxuXG4vKkVWRU5UIExJU1RFTkVSUyovXG5cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IHVzZXJEYXRhID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgcHJvZmlsZVRpdGxlSW5wdXQudmFsdWUgPSB1c2VyRGF0YS50aXRsZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSB1c2VyRGF0YS5kZXNjcmlwdGlvbjtcbiAgcHJvZmlsZUVkaXRQb3B1cC5vcGVuKCk7XG59KTtcblxuY2FyZHNXcmFwLnJlbmRlckl0ZW1zKCk7XG5cbmFkZE5ld0NhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkRm9ybVZhbGlkYXRvci50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICBuZXdDYXJkUG9wdXAub3BlbigpO1xufSk7XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG4gIGFkZEl0ZW0oY2FyZERhdGEpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkRGF0YSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS10aXRsZVwiKS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgY29uc3QgaW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgaW1hZ2Uuc3JjID0gbGluaztcbiAgICBpbWFnZS5hbHQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBwcm9maWxlVGl0bGVTZWxlY3RvciwgcHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3RpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlVGl0bGVTZWxlY3Rvcik7XG4gICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVEZXNjcmlwdGlvblNlbGVjdG9yKTtcbiAgfVxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGl0bGU6IHRoaXMuX3RpdGxlLnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2Rlc2NyaXB0aW9uLnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IHRpdGxlLCBkZXNjcmlwdGlvbiB9KSB7XG4gICAgdGhpcy5fdGl0bGUudGV4dENvbnRlbnQgPSB0aXRsZTtcbiAgICB0aGlzLl9kZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IGRlc2NyaXB0aW9uO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VJY29uIiwiX2VsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJyZW1vdmUiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfZ2V0VGVtcGxhdGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJnZXRWaWV3Iiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJDb25zdGFudHMiLCJpbml0aWFsQ2FyZHMiLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwidmFsaWRhdGlvblNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsIiwiZXJyb3JNZXNzYWdlRWwiLCJpZCIsImFkZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX2hpZGVJbnB1dEVycm9yIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkaXR5IiwidmFsaWQiLCJfZGlzYWJsZUJ1dHRvbiIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJ0b2dnbGVCdXR0b25TdGF0ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfaW5wdXRFbHMiLCJldmVyeSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZSIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwiX3JlZiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0TGlzdCIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwiaW5wdXQiLCJ2YWx1ZSIsInZhbHVlcyIsImNvbnNvbGUiLCJsb2ciLCJyZXNldCIsImVkaXRQcm9maWxlTW9kYWwiLCJhZGRDYXJkTW9kYWwiLCJhZGRDYXJkRm9ybUVsZW1lbnQiLCJhZGROZXdDYXJkQnV0dG9uIiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlVGl0bGVJbnB1dCIsInByb2ZpbGVEZXNjcmlwdGlvbklucHV0IiwiY29uc3RhbnRzIiwiZWRpdEZvcm1FbGVtZW50IiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsInJlbmRlckNhcmQiLCJjYXJkRGF0YSIsIkNhcmQiLCJjYXJkc1dyYXAiLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiX2l0ZW1zIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsInByZXBlbmQiLCJjYXJkIiwicHJldmlld1BvcHVwIiwiaW1hZ2UiLCJuZXdDYXJkUG9wdXAiLCJQb3B1cFdpdGhGb3JtIiwiX3JlZjIiLCJuZXdDYXJkIiwiaGFuZGxlQWRkQ2FyZEZvcm1TdWJtaXQiLCJwcm9maWxlRWRpdFBvcHVwIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCIsInByb2ZpbGVUaXRsZVNlbGVjdG9yIiwicHJvZmlsZURlc2NyaXB0aW9uU2VsZWN0b3IiLCJfdGl0bGUiLCJfZGVzY3JpcHRpb24iLCJnZXRVc2VySW5mbyIsInVzZXJEYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==